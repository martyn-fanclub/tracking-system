<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tracking system</title>
    <link rel="stylesheet" type="text/css" href="static/styles/design-token.css">
    <link rel="stylesheet" type="text/css" href="static/styles/common.css">
    <link rel="stylesheet" type="text/css" href="static/styles/base.css">
    <link rel="stylesheet" type="text/css" href="static/styles/user-panel.css">
    <link rel="stylesheet" type="text/css" href="static/styles/timetable.css">
    <link rel="stylesheet" type="text/css" href="static/styles/details-list.css">
    <link rel="stylesheet" type="text/css" href="static/styles/popup.css">
    <link rel="stylesheet" type="text/css" href="static/styles/header.css">
</head>
<body>
<svg display="none">
    <symbol viewBox="0 0 24 24" id="info-icon">
        <path d="M8.40626 5.57929H10.2395V7.41257H8.40626V5.57929ZM8.40626 9.24586H10.2395V14.7457H8.40626V9.24586ZM9.3229 0.996094C4.26304 0.996094 0.156494 5.10264 0.156494 10.1625C0.156494 15.2223 4.26304 19.3289 9.3229 19.3289C14.3827 19.3289 18.4893 15.2223 18.4893 10.1625C18.4893 5.10264 14.3827 0.996094 9.3229 0.996094ZM9.3229 17.4956C5.28051 17.4956 1.98977 14.2049 1.98977 10.1625C1.98977 6.12011 5.28051 2.82937 9.3229 2.82937C13.3653 2.82937 16.656 6.12011 16.656 10.1625C16.656 14.2049 13.3653 17.4956 9.3229 17.4956Z"
              fill="#C9C9C9"/>
    </symbol>
    <symbol viewBox="0 0 200 200" id="logo-icon">
        <path id="path3801_2_" class="st3" d="
		M97,26.3c-7.9,0-20.9,0.3-28.4,1.2C58.1,28.8,54,34.2,52.9,44c-0.9,7.5-1.5,18.4-1.5,28.5c0,10.2,0.2,21.1,1.5,28.6
		c1.6,9.8,6.2,14.9,15.7,16.4c7.5,1.2,21.3,1.2,28.4,1.2c7.1,0,20.9,0,28.4-1.2c9.4-1.5,13.9-6.6,15.7-16.4
		c1.3-7.5,1.5-18.9,1.5-28.6c0-9.7-0.9-22.6-1.5-28.5c-1-10.2-5.4-15.1-15.7-16.5C117.8,26.5,104.8,26.3,97,26.3z M128.9,36.7
		c2,0.9,5.5,6.1,4.7,11.8c-3.9,3.2-8.7,5.5-13.3,6.2v36.5H134c0,5.6-0.9,10.1-1.8,11.8h-24.9V55.3H90v28.5
		c0,14.4-8.1,21.4-18.4,21.4c-2.9,0-6.4-0.4-9.3-1.2c-1.4-1.9-2-7.4-2.2-14.4c6.9,3.3,16.2,4.9,16.9-5.9V57.1
		c-10.4,1.2-14.3,8.5-17.8,13.3c0.1-6.6,0.4-12.4,0.7-16.4C67,46.3,75,42.7,90.7,42.7h22.5C118.7,42.7,124,40.7,128.9,36.7z"/>
    </symbol>
    <symbol viewBox="0 0 24 24" id="close-icon">
        <path d="M0 0h24v24H0V0z" fill="none"/>
        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>
    </symbol>
</svg>
<header>
    <div class="header__half">
        <svg class="header__logo">
            <use xlink:href="#logo-icon" alt="Логотип политеха">
            </use>
        </svg>
        <nav class="header__nav">
            <a class="header__working-place" href="">Рабочее место</a>
            <a class="header__stats" href="">Статистика</a>
        </nav>
    </div>
    <div class="header__half">
        <nav class="header__nav">
            <a class="header__working-place" href="">Рабочее место</a>
            <a class="header__stats" href="">Статистика</a>
        </nav>
        <div class="header__timer timer-small">
            <p class="timer-small__text">12:32</p>
        </div>
    </div>
</header>
<!--/*@thymesVar id="place" type="com.github.martynfunclub.trackingsystem.models.WorkersPlace"*/-->
<div class="popup-container">
    <div th:each="place : ${places}" class="popup" th:data-machine-id="${place.id}">
        <div class="popup__window">
            <svg class="popup__close-button">
                <use xlink:href="#close-icon"></use>
            </svg>
            <p class="popup__title">Выберите причину простоя</p>

            <!--List of breaks-->

            <div>
                <form action="break.html" method="get">
                    <input type="hidden">
                    <button type=submit class="button popup__button button_accent">
                        <p class="button__text">

                            <!--Break name-->

                            перерыв
                        </p>
                    </button>
                </form>

                <form action="break.html" method="get">
                    <input type="hidden">
                    <button type=submit class="button popup__button">
                        <p class="button__text">
                            работа на др. станке
                        </p>
                    </button>
                </form>

                <form action="break.html" method="get">
                    <input type="hidden">
                    <button type=submit class="button popup__button">
                        <p class="button__text">
                            инструмент/оснастка
                        </p>
                    </button>
                </form>

                <form action="break.html" method="get">
                    <input type="hidden">
                    <button type=submit class="button popup__button">
                        <p class="button__text">
                            контроль
                        </p>
                    </button>
                </form>

                <form action="break.html" method="get">
                    <input type="hidden">
                    <button type=submit class="button popup__button">
                        <p class="button__text">
                            станок
                        </p>
                    </button>
                </form>

                <form action="break.html" method="get">
                    <input type="hidden">
                    <button type=submit class="button popup__button button_alert">
                        <p class="button__text">
                            нужен мастер
                        </p>
                    </button>
                </form>

            </div>
        </div>
    </div>
</div>
<main>
    <div th:each="place : ${places}" class="content" th:data-machine-id="${place.id}">
        <div class="upper-section">
            <section class="user-panel">
                <div class="user-panel__info-section">
                    <div class="user-panel__text">

                        <!--Name of machine-->

                        <p th:text="${place.name}" class="user-panel__machine-name"></p>

                        <!--Worker name-->

                        <p class="user-panel__worker-name" th:if="${place.currentShift}" >
                            <span th:text="${place.currentShift.user.surname}"></span>
                            <span th:text="${place.currentShift.user.name}"></span>
                            <span th:text="${place.currentShift.user.patronymic}"></span>
                        </p>
                    </div>
                    <svg>
                        <use xlink:href="#info-icon" alt="additional information">
                        </use>
                    </svg>
                </div>

                <!--Move to next stage-->

                <div class="user-panel__nav">
                    <form th:if="${place.currentShift}" action="production-stage.html" method="get">
                        <input type="hidden">
                        <button type=submit class="button user-panel__button button_accent">
                            <p class="button__text user-panel__wrap">
                                закончить подг. стадию
                            </p>
                        </button>
                    </form>

                    <!--LKR-->

                    <div th:if="${place.currentShift}" class="button user-panel__button">
                        <p class="button__text">ЛКР</p>
                    </div>

                    <!--Take a break-->

                    <div th:if="${place.currentShift}" class="button user-panel__button button_open-popup">
                        <p class="button__text" th:data-machine-id="${place.id}">простой</p>
                    </div>

                    <!--End shift-->

                    <form th:if="${place.currentShift}" method="POST" th:action="@{/shifts/off}">
                        <input type="hidden" name="id" th:value="${place.id}">
                        <button type=submit class="button user-panel__button">
                            <p class="button__text user-panel__wrap">
                                закончить смену
                            </p>
                        </button>
                    </form>
                    <form th:unless="${place.currentShift}" method="POST" th:action="@{/shifts/on}">
                        <input type="hidden" name="id" th:value="${place.id}">
                        <button type=submit class="button user-panel__button button_accent">
                            <p class="button__text">начать смену</p>
                        </button>
                    </form>
                </div>
            </section>
            <section class="timetable">

                <div th:if="${place.currentShift}" class="timer timetable__shift-timer">

                    <!--Shift timer-->

                    <span class="timer__time-title timetable__title-section">время смены</span>
                    <div class="timetable__bar">
                        <div class="timer__bar_white"></div>
                        <div class="timer__bar_blue timetable__left-top-blue-bar"></div>
                        <div class="timer__clock-panel">

                            <!--Time passed-->

                            <div class="timer__time-signature timer__time-signature_top">прошло:</div>
                            <div class="timer__clock timer__clock_top">
                                <span class="timer__digit timer__digit_hours"><!--Hours-->0</span><span
                                    class="timer__digit">:</span><span
                                    class="timer__digit timer__digit_minutes"><!--Minutes-->22</span>
                            </div>
                        </div>
                        <div class="timer__clock-panel">

                            <!--Start time-->

                            <div class="timer__time-signature timer__time-signature_bottom">нач:</div>
                            <div class="timer__clock timer__clock_bottom">
                                <span class="timer__digit timer__digit_hours"><!--Hours-->8</span><span
                                    class="timer__digit">:</span><span
                                    class="timer__digit timer__digit_minutes"><!--Minutes-->42</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div th:if="${place.currentShift}" class="timetable__bottom-time-panel">

                    <!--Production detail timer-->

                    <span class="timer__time-title timetable__title-section">изготовление(подготовка)</span>
                    <div class="timetable__bar">
                        <div class="timer__bar_white"></div>
                        <div class="timer__bar_blue" style="width: 50%;"></div>
                        <div class="timer__clock-panel">

                            <!--Time passed-->

                            <div class="timer__time-signature timer__time-signature_top">прошло:</div>
                            <div class="timer__clock timer__clock_top">
                                <span class="timer__digit timer__digit_hours"><!--Hours-->0</span><span
                                    class="timer__digit">:</span><span
                                    class="timer__digit timer__digit_minutes"><!--Minutes-->42</span>
                            </div>
                        </div>
                        <div class="timer__clock-panel">

                            <!--Time limit-->

                            <div class="timer__time-signature timer__time-signature_bottom">макс:</div>
                            <div class="timer__clock timer__clock_bottom">
                                <span class="timer__digit timer__digit_hours"><!--Hours-->1</span><span
                                    class="timer__digit">:</span><span
                                    class="timer__digit timer__digit_minutes"><!--Minutes-->22</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <section class="details-list">

            <div class="table-header">
                <div class="table-header__number">№</div>
                <div class="table-header__name-detail">название</div>
                <div class="table-header__time">время</div>
                <div class="table-header__cell-number">№ ячейки</div>
            </div>

            <div th:if="${place.currentOrders}" th:each="order, state : ${place.currentOrders}" class="table-line">
                <div th:text="${state.index + 1 + '.'}" class="table-line__number"></div>
                <!--/*@thymesVar id="order" type="com.github.martynfunclub.trackingsystem.models.Order"*/-->
                <div th:text="${order.orderType.from.name + ' -> ' + order.orderType.to.name}" class="table-line__detail-name"></div>
                <div th:text="${order.orderType.maxTime}" class="table-line__time-detail"></div>
                <div th:text="${order.detail.cell.id}" class="table-line__cell-number"></div>
                <div class="button table-line__button">
                    <p class="button__text table-line__button-text">доп.инф.</p>
                </div>
            </div>

        </section>
    </div>
</main>
<script src="static/scripts/popup.js"></script>
<script src="static/scripts/global-timer.js"></script>

</body>
</html>
